public class ucar.nc2.iosp.mcidas.McIDASGridServiceProvider extends ucar.nc2.iosp.grid.GridServiceProvider
{
    protected ucar.nc2.iosp.mcidas.McIDASGridReader mcGridReader;

    public void <init>()
    {
        ucar.nc2.iosp.mcidas.McIDASGridServiceProvider r0;

        r0 := @this: ucar.nc2.iosp.mcidas.McIDASGridServiceProvider;

        specialinvoke r0.<ucar.nc2.iosp.grid.GridServiceProvider: void <init>()>();

        return;
    }

    public boolean isValidFile(ucar.unidata.io.RandomAccessFile) throws java.io.IOException
    {
        ucar.nc2.iosp.mcidas.McIDASGridReader $r1, $r3;
        ucar.unidata.io.RandomAccessFile r2;
        ucar.nc2.iosp.mcidas.McIDASGridServiceProvider r0;
        java.io.IOException $r4;

        r0 := @this: ucar.nc2.iosp.mcidas.McIDASGridServiceProvider;

        r2 := @parameter0: ucar.unidata.io.RandomAccessFile;

     label1:
        $r1 = new ucar.nc2.iosp.mcidas.McIDASGridReader;

        specialinvoke $r1.<ucar.nc2.iosp.mcidas.McIDASGridReader: void <init>()>();

        r0.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: ucar.nc2.iosp.mcidas.McIDASGridReader mcGridReader> = $r1;

        $r3 = r0.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: ucar.nc2.iosp.mcidas.McIDASGridReader mcGridReader>;

        virtualinvoke $r3.<ucar.nc2.iosp.mcidas.McIDASGridReader: void init(ucar.unidata.io.RandomAccessFile,boolean)>(r2, 0);

     label2:
        goto label4;

     label3:
        $r4 := @caughtexception;

        return 0;

     label4:
        return 1;

        catch java.io.IOException from label1 to label2 with label3;
    }

    public java.lang.String getFileTypeId()
    {
        ucar.nc2.iosp.mcidas.McIDASGridServiceProvider r0;

        r0 := @this: ucar.nc2.iosp.mcidas.McIDASGridServiceProvider;

        return "McIDASGrid";
    }

    public java.lang.String getFileTypeDescription()
    {
        ucar.nc2.iosp.mcidas.McIDASGridServiceProvider r0;

        r0 := @this: ucar.nc2.iosp.mcidas.McIDASGridServiceProvider;

        return "McIDAS Grid file";
    }

    public void open(ucar.unidata.io.RandomAccessFile, ucar.nc2.NetcdfFile, ucar.nc2.util.CancelTask) throws java.io.IOException
    {
        ucar.unidata.io.RandomAccessFile r1;
        long $l0, $l1, $l2;
        ucar.nc2.util.CancelTask r3;
        java.lang.String $r11, $r15;
        boolean $z0;
        ucar.nc2.iosp.mcidas.McIDASGridReader $r4, $r5, $r6, $r16;
        java.io.PrintStream $r9;
        ucar.nc2.iosp.mcidas.McIDASGridServiceProvider r0;
        java.lang.StringBuilder $r8, $r10, $r12, $r13, $r14;
        ucar.nc2.NetcdfFile r2;
        ucar.grid.GridIndex $r7;

        r0 := @this: ucar.nc2.iosp.mcidas.McIDASGridServiceProvider;

        r1 := @parameter0: ucar.unidata.io.RandomAccessFile;

        r2 := @parameter1: ucar.nc2.NetcdfFile;

        r3 := @parameter2: ucar.nc2.util.CancelTask;

        specialinvoke r0.<ucar.nc2.iosp.grid.GridServiceProvider: void open(ucar.unidata.io.RandomAccessFile,ucar.nc2.NetcdfFile,ucar.nc2.util.CancelTask)>(r1, r2, r3);

        $l0 = staticinvoke <java.lang.System: long currentTimeMillis()>();

        $r4 = r0.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: ucar.nc2.iosp.mcidas.McIDASGridReader mcGridReader>;

        if $r4 != null goto label1;

        $r16 = new ucar.nc2.iosp.mcidas.McIDASGridReader;

        specialinvoke $r16.<ucar.nc2.iosp.mcidas.McIDASGridReader: void <init>()>();

        r0.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: ucar.nc2.iosp.mcidas.McIDASGridReader mcGridReader> = $r16;

     label1:
        $r5 = r0.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: ucar.nc2.iosp.mcidas.McIDASGridReader mcGridReader>;

        virtualinvoke $r5.<ucar.nc2.iosp.mcidas.McIDASGridReader: void init(ucar.unidata.io.RandomAccessFile)>(r1);

        $r6 = r0.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: ucar.nc2.iosp.mcidas.McIDASGridReader mcGridReader>;

        $r7 = virtualinvoke $r6.<ucar.nc2.iosp.mcidas.McIDASGridReader: ucar.grid.GridIndex getGridIndex()>();

        virtualinvoke r0.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: void open(ucar.grid.GridIndex,ucar.nc2.util.CancelTask)>($r7, r3);

        $z0 = <ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: boolean debugOpen>;

        if $z0 == 0 goto label2;

        $r9 = <java.lang.System: java.io.PrintStream out>;

        $r8 = new java.lang.StringBuilder;

        specialinvoke $r8.<java.lang.StringBuilder: void <init>()>();

        $r10 = virtualinvoke $r8.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(" GridServiceProvider.open ");

        $r11 = virtualinvoke r2.<ucar.nc2.NetcdfFile: java.lang.String getLocation()>();

        $r12 = virtualinvoke $r10.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r11);

        $r13 = virtualinvoke $r12.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(" took ");

        $l1 = staticinvoke <java.lang.System: long currentTimeMillis()>();

        $l2 = $l1 - $l0;

        $r14 = virtualinvoke $r13.<java.lang.StringBuilder: java.lang.StringBuilder append(long)>($l2);

        $r15 = virtualinvoke $r14.<java.lang.StringBuilder: java.lang.String toString()>();

        virtualinvoke $r9.<java.io.PrintStream: void println(java.lang.String)>($r15);

     label2:
        return;
    }

    protected void open(ucar.grid.GridIndex, ucar.nc2.util.CancelTask) throws java.io.IOException
    {
        ucar.nc2.iosp.mcidas.McIDASGridServiceProvider r7;
        ucar.nc2.iosp.mcidas.McIDASLookup $r0;
        java.util.List $r2;
        ucar.nc2.util.CancelTask r8;
        ucar.nc2.iosp.grid.GridIndexToNC $r5;
        ucar.nc2.iosp.mcidas.McIDASGridRecord $r4;
        ucar.nc2.dt.fmr.FmrcCoordSys $r9;
        java.lang.Object $r3;
        java.lang.String $r6;
        ucar.nc2.NetcdfFile $r10, $r11;
        ucar.grid.GridIndex r1;

        r7 := @this: ucar.nc2.iosp.mcidas.McIDASGridServiceProvider;

        r1 := @parameter0: ucar.grid.GridIndex;

        r8 := @parameter1: ucar.nc2.util.CancelTask;

        $r0 = new ucar.nc2.iosp.mcidas.McIDASLookup;

        $r2 = virtualinvoke r1.<ucar.grid.GridIndex: java.util.List getGridRecords()>();

        $r3 = interfaceinvoke $r2.<java.util.List: java.lang.Object get(int)>(0);

        $r4 = (ucar.nc2.iosp.mcidas.McIDASGridRecord) $r3;

        specialinvoke $r0.<ucar.nc2.iosp.mcidas.McIDASLookup: void <init>(ucar.nc2.iosp.mcidas.McIDASGridRecord)>($r4);

        $r5 = new ucar.nc2.iosp.grid.GridIndexToNC;

        $r6 = r1.<ucar.grid.GridIndex: java.lang.String filename>;

        specialinvoke $r5.<ucar.nc2.iosp.grid.GridIndexToNC: void <init>(java.lang.String)>($r6);

        $r10 = r7.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: ucar.nc2.NetcdfFile ncfile>;

        $r9 = r7.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: ucar.nc2.dt.fmr.FmrcCoordSys fmrcCoordSys>;

        virtualinvoke $r5.<ucar.nc2.iosp.grid.GridIndexToNC: void open(ucar.grid.GridIndex,ucar.grid.GridTableLookup,int,ucar.nc2.NetcdfFile,ucar.nc2.dt.fmr.FmrcCoordSys,ucar.nc2.util.CancelTask)>(r1, $r0, 4, $r10, $r9, r8);

        $r11 = r7.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: ucar.nc2.NetcdfFile ncfile>;

        virtualinvoke $r11.<ucar.nc2.NetcdfFile: void finish()>();

        return;
    }

    public boolean sync()
    {
        ucar.nc2.iosp.mcidas.McIDASGridReader $r1, $r2;
        ucar.nc2.iosp.mcidas.McIDASGridServiceProvider r0;
        java.io.IOException $r5;
        ucar.nc2.NetcdfFile $r4;
        ucar.grid.GridIndex $r3;
        boolean $z0;

        r0 := @this: ucar.nc2.iosp.mcidas.McIDASGridServiceProvider;

     label1:
        $r1 = r0.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: ucar.nc2.iosp.mcidas.McIDASGridReader mcGridReader>;

        $z0 = virtualinvoke $r1.<ucar.nc2.iosp.mcidas.McIDASGridReader: boolean init()>();

        if $z0 != 0 goto label3;

     label2:
        return 0;

     label3:
        $r2 = r0.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: ucar.nc2.iosp.mcidas.McIDASGridReader mcGridReader>;

        $r3 = virtualinvoke $r2.<ucar.nc2.iosp.mcidas.McIDASGridReader: ucar.grid.GridIndex getGridIndex()>();

        $r4 = r0.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: ucar.nc2.NetcdfFile ncfile>;

        virtualinvoke $r4.<ucar.nc2.NetcdfFile: void empty()>();

        virtualinvoke r0.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: void open(ucar.grid.GridIndex,ucar.nc2.util.CancelTask)>($r3, null);

     label4:
        return 1;

     label5:
        $r5 := @caughtexception;

        return 0;

        catch java.io.IOException from label1 to label2 with label5;
        catch java.io.IOException from label3 to label4 with label5;
    }

    protected float[] _readData(ucar.grid.GridRecord) throws java.io.IOException
    {
        ucar.nc2.iosp.mcidas.McIDASGridReader $r3;
        ucar.nc2.iosp.mcidas.McIDASGridServiceProvider r0;
        ucar.nc2.iosp.mcidas.McIDASGridRecord $r2;
        float[] $r4;
        ucar.grid.GridRecord r1;

        r0 := @this: ucar.nc2.iosp.mcidas.McIDASGridServiceProvider;

        r1 := @parameter0: ucar.grid.GridRecord;

        $r3 = r0.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: ucar.nc2.iosp.mcidas.McIDASGridReader mcGridReader>;

        $r2 = (ucar.nc2.iosp.mcidas.McIDASGridRecord) r1;

        $r4 = virtualinvoke $r3.<ucar.nc2.iosp.mcidas.McIDASGridReader: float[] readGrid(ucar.nc2.iosp.mcidas.McIDASGridRecord)>($r2);

        return $r4;
    }

    public static void main(java.lang.String[]) throws java.io.IOException
    {
        ucar.unidata.io.RandomAccessFile $r1;
        ucar.nc2.iosp.mcidas.McIDASGridServiceProvider $r0;
        ucar.nc2.iosp.mcidas.McIDASGridServiceProvider$MakeNetcdfFile $r4;
        java.lang.String[] r2;
        java.lang.String $r3, $r5;

        r2 := @parameter0: java.lang.String[];

        $r0 = new ucar.nc2.iosp.mcidas.McIDASGridServiceProvider;

        specialinvoke $r0.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider: void <init>()>();

        $r1 = new ucar.unidata.io.RandomAccessFile;

        $r3 = r2[0];

        specialinvoke $r1.<ucar.unidata.io.RandomAccessFile: void <init>(java.lang.String,java.lang.String,int)>($r3, "r", 2048);

        $r4 = new ucar.nc2.iosp.mcidas.McIDASGridServiceProvider$MakeNetcdfFile;

        $r5 = r2[0];

        specialinvoke $r4.<ucar.nc2.iosp.mcidas.McIDASGridServiceProvider$MakeNetcdfFile: void <init>(ucar.nc2.iosp.IOServiceProvider,ucar.unidata.io.RandomAccessFile,java.lang.String,ucar.nc2.util.CancelTask)>($r0, $r1, $r5, null);

        return;
    }
}
