public class org.bouncycastle.mail.smime.examples.CreateLargeEncryptedMail extends java.lang.Object
{

    public void <init>()
    {
        org.bouncycastle.mail.smime.examples.CreateLargeEncryptedMail r0;

        r0 := @this: org.bouncycastle.mail.smime.examples.CreateLargeEncryptedMail;

        specialinvoke r0.<java.lang.Object: void <init>()>();

        return;
    }

    public static void main(java.lang.String[]) throws java.lang.Exception
    {
        java.security.cert.X509Certificate $r9;
        javax.mail.internet.MimeBodyPart $r10, $r16;
        java.lang.String[] r0;
        javax.activation.DataHandler $r11;
        javax.mail.internet.InternetAddress $r19, $r20;
        javax.activation.FileDataSource $r12;
        int $i0;
        java.lang.String $r2, $r3, $r5, $r14, $r15, $r24;
        org.bouncycastle.mail.smime.SMIMEEnvelopedGenerator $r7;
        java.io.PrintStream $r26;
        java.util.Properties $r17;
        java.io.FileOutputStream $r25;
        java.security.KeyStore $r1;
        javax.mail.internet.MimeMessage $r21;
        java.io.File $r13;
        java.security.cert.Certificate $r8;
        javax.mail.Message$RecipientType $r22;
        char[] $r4;
        javax.mail.Session $r18;
        java.security.cert.Certificate[] $r6;
        java.lang.Object $r23;

        r0 := @parameter0: java.lang.String[];

        $i0 = lengthof r0;

        if $i0 == 3 goto label1;

        $r26 = <java.lang.System: java.io.PrintStream err>;

        virtualinvoke $r26.<java.io.PrintStream: void println(java.lang.String)>("usage: CreateLargeEncryptedMail pkcs12Keystore password inputFile");

        staticinvoke <java.lang.System: void exit(int)>(0);

     label1:
        $r1 = staticinvoke <java.security.KeyStore: java.security.KeyStore getInstance(java.lang.String,java.lang.String)>("PKCS12", "BC");

        $r3 = r0[0];

        $r2 = r0[1];

        $r4 = virtualinvoke $r2.<java.lang.String: char[] toCharArray()>();

        $r5 = staticinvoke <org.bouncycastle.mail.smime.examples.ExampleUtils: java.lang.String findKeyAlias(java.security.KeyStore,java.lang.String,char[])>($r1, $r3, $r4);

        $r6 = virtualinvoke $r1.<java.security.KeyStore: java.security.cert.Certificate[] getCertificateChain(java.lang.String)>($r5);

        $r7 = new org.bouncycastle.mail.smime.SMIMEEnvelopedGenerator;

        specialinvoke $r7.<org.bouncycastle.mail.smime.SMIMEEnvelopedGenerator: void <init>()>();

        $r8 = $r6[0];

        $r9 = (java.security.cert.X509Certificate) $r8;

        virtualinvoke $r7.<org.bouncycastle.mail.smime.SMIMEEnvelopedGenerator: void addKeyTransRecipient(java.security.cert.X509Certificate)>($r9);

        $r10 = new javax.mail.internet.MimeBodyPart;

        specialinvoke $r10.<javax.mail.internet.MimeBodyPart: void <init>()>();

        $r11 = new javax.activation.DataHandler;

        $r12 = new javax.activation.FileDataSource;

        $r13 = new java.io.File;

        $r14 = r0[2];

        specialinvoke $r13.<java.io.File: void <init>(java.lang.String)>($r14);

        specialinvoke $r12.<javax.activation.FileDataSource: void <init>(java.io.File)>($r13);

        specialinvoke $r11.<javax.activation.DataHandler: void <init>(javax.activation.DataSource)>($r12);

        virtualinvoke $r10.<javax.mail.internet.MimeBodyPart: void setDataHandler(javax.activation.DataHandler)>($r11);

        virtualinvoke $r10.<javax.mail.internet.MimeBodyPart: void setHeader(java.lang.String,java.lang.String)>("Content-Type", "application/octet-stream");

        virtualinvoke $r10.<javax.mail.internet.MimeBodyPart: void setHeader(java.lang.String,java.lang.String)>("Content-Transfer-Encoding", "binary");

        $r15 = <org.bouncycastle.mail.smime.SMIMEEnvelopedGenerator: java.lang.String RC2_CBC>;

        $r16 = virtualinvoke $r7.<org.bouncycastle.mail.smime.SMIMEEnvelopedGenerator: javax.mail.internet.MimeBodyPart generate(javax.mail.internet.MimeBodyPart,java.lang.String,java.lang.String)>($r10, $r15, "BC");

        $r17 = staticinvoke <java.lang.System: java.util.Properties getProperties()>();

        $r18 = staticinvoke <javax.mail.Session: javax.mail.Session getDefaultInstance(java.util.Properties,javax.mail.Authenticator)>($r17, null);

        $r19 = new javax.mail.internet.InternetAddress;

        specialinvoke $r19.<javax.mail.internet.InternetAddress: void <init>(java.lang.String)>("\"Eric H. Echidna\"<eric@bouncycastle.org>");

        $r20 = new javax.mail.internet.InternetAddress;

        specialinvoke $r20.<javax.mail.internet.InternetAddress: void <init>(java.lang.String)>("example@bouncycastle.org");

        $r21 = new javax.mail.internet.MimeMessage;

        specialinvoke $r21.<javax.mail.internet.MimeMessage: void <init>(javax.mail.Session)>($r18);

        virtualinvoke $r21.<javax.mail.internet.MimeMessage: void setFrom(javax.mail.Address)>($r19);

        $r22 = <javax.mail.Message$RecipientType: javax.mail.Message$RecipientType TO>;

        virtualinvoke $r21.<javax.mail.internet.MimeMessage: void setRecipient(javax.mail.Message$RecipientType,javax.mail.Address)>($r22, $r20);

        virtualinvoke $r21.<javax.mail.internet.MimeMessage: void setSubject(java.lang.String)>("example encrypted message");

        $r23 = virtualinvoke $r16.<javax.mail.internet.MimeBodyPart: java.lang.Object getContent()>();

        $r24 = virtualinvoke $r16.<javax.mail.internet.MimeBodyPart: java.lang.String getContentType()>();

        virtualinvoke $r21.<javax.mail.internet.MimeMessage: void setContent(java.lang.Object,java.lang.String)>($r23, $r24);

        virtualinvoke $r21.<javax.mail.internet.MimeMessage: void saveChanges()>();

        $r25 = new java.io.FileOutputStream;

        specialinvoke $r25.<java.io.FileOutputStream: void <init>(java.lang.String)>("encrypted.message");

        virtualinvoke $r21.<javax.mail.internet.MimeMessage: void writeTo(java.io.OutputStream)>($r25);

        return;
    }
}
