class org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C extends java.lang.Object implements org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelper
{
    private static final com.google.gwt.dom.client.Element SPAN;
    private final org.waveprotocol.wave.client.editor.selection.html.NativeSelectionUtil$MutationListener mutationListener;

    void <init>(org.waveprotocol.wave.client.editor.selection.html.NativeSelectionUtil$MutationListener)
    {
        org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C r0;
        org.waveprotocol.wave.client.editor.selection.html.NativeSelectionUtil$MutationListener r1;

        r0 := @this: org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C;

        r1 := @parameter0: org.waveprotocol.wave.client.editor.selection.html.NativeSelectionUtil$MutationListener;

        specialinvoke r0.<java.lang.Object: void <init>()>();

        r0.<org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C: org.waveprotocol.wave.client.editor.selection.html.NativeSelectionUtil$MutationListener mutationListener> = r1;

        return;
    }

    public org.waveprotocol.wave.client.common.util.OffsetPosition getNearestElementPosition()
    {
        org.waveprotocol.wave.client.common.util.OffsetPosition $r3;
        int $i0;
        org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative $r0;
        org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C r1;
        com.google.gwt.dom.client.Node $r2;

        r1 := @this: org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C;

        $r0 = staticinvoke <org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative: org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative getSelectionUnsafe()>();

        if $r0 != null goto label1;

        $r3 = null;

        goto label2;

     label1:
        $r2 = virtualinvoke $r0.<org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative: com.google.gwt.dom.client.Node focusNode()>();

        $i0 = virtualinvoke $r0.<org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative: int focusOffset()>();

        $r3 = specialinvoke r1.<org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C: org.waveprotocol.wave.client.common.util.OffsetPosition getNearestElementPosition(com.google.gwt.dom.client.Node,int)>($r2, $i0);

     label2:
        return $r3;
    }

    private org.waveprotocol.wave.client.common.util.OffsetPosition getNearestElementPosition(com.google.gwt.dom.client.Node, int)
    {
        org.waveprotocol.wave.client.common.util.OffsetPosition $r5;
        com.google.gwt.core.client.JavaScriptObject $r1;
        org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C r3;
        int $i0, $i1, i2;
        com.google.gwt.dom.client.Element $r2, $r4;
        com.google.gwt.dom.client.Node r0;
        boolean $z0;

        r3 := @this: org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C;

        r0 := @parameter0: com.google.gwt.dom.client.Node;

        i2 := @parameter1: int;

        if r0 != null goto label1;

        return null;

     label1:
        $z0 = staticinvoke <org.waveprotocol.wave.client.common.util.DomHelper: boolean isTextNode(com.google.gwt.dom.client.Node)>(r0);

        if $z0 == 0 goto label2;

        $r4 = virtualinvoke r0.<com.google.gwt.dom.client.Node: com.google.gwt.dom.client.Element getParentElement()>();

        goto label3;

     label2:
        $r1 = virtualinvoke r0.<com.google.gwt.dom.client.Node: com.google.gwt.core.client.JavaScriptObject cast()>();

        $r4 = (com.google.gwt.dom.client.Element) $r1;

     label3:
        if $r4 != null goto label4;

        $r5 = null;

        goto label5;

     label4:
        $r5 = new org.waveprotocol.wave.client.common.util.OffsetPosition;

        $i0 = virtualinvoke $r4.<com.google.gwt.dom.client.Element: int getOffsetLeft()>();

        $i1 = virtualinvoke $r4.<com.google.gwt.dom.client.Element: int getOffsetTop()>();

        $r2 = virtualinvoke $r4.<com.google.gwt.dom.client.Element: com.google.gwt.dom.client.Element getOffsetParent()>();

        specialinvoke $r5.<org.waveprotocol.wave.client.common.util.OffsetPosition: void <init>(int,int,com.google.gwt.dom.client.Element)>($i0, $i1, $r2);

     label5:
        return $r5;
    }

    public org.waveprotocol.wave.client.common.util.OffsetPosition getFocusPosition()
    {
        org.waveprotocol.wave.client.common.util.OffsetPosition $r3;
        int $i0;
        org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative $r0;
        org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C r1;
        com.google.gwt.dom.client.Node $r2;

        r1 := @this: org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C;

        $r0 = staticinvoke <org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative: org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative getSelectionGuarded()>();

        if $r0 != null goto label1;

        $r3 = null;

        goto label2;

     label1:
        $r2 = virtualinvoke $r0.<org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative: com.google.gwt.dom.client.Node focusNode()>();

        $i0 = virtualinvoke $r0.<org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative: int focusOffset()>();

        $r3 = specialinvoke r1.<org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C: org.waveprotocol.wave.client.common.util.OffsetPosition getPosition(com.google.gwt.dom.client.Node,int)>($r2, $i0);

     label2:
        return $r3;
    }

    public org.waveprotocol.wave.client.common.util.OffsetPosition getAnchorPosition()
    {
        org.waveprotocol.wave.client.common.util.OffsetPosition $r3;
        int $i0;
        org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative $r0;
        org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C r1;
        com.google.gwt.dom.client.Node $r2;

        r1 := @this: org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C;

        $r0 = staticinvoke <org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative: org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative getSelectionGuarded()>();

        if $r0 != null goto label1;

        $r3 = null;

        goto label2;

     label1:
        $r2 = virtualinvoke $r0.<org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative: com.google.gwt.dom.client.Node anchorNode()>();

        $i0 = virtualinvoke $r0.<org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative: int anchorOffset()>();

        $r3 = specialinvoke r1.<org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C: org.waveprotocol.wave.client.common.util.OffsetPosition getPosition(com.google.gwt.dom.client.Node,int)>($r2, $i0);

     label2:
        return $r3;
    }

    private org.waveprotocol.wave.client.common.util.OffsetPosition getPosition(com.google.gwt.dom.client.Node, int)
    {
        com.google.gwt.dom.client.Text $r8;
        boolean $z0;
        org.waveprotocol.wave.client.common.util.OffsetPosition $r25, $r26;
        com.google.gwt.dom.client.Element $r1, $r4, $r13, $r15, $r16, $r17, $r18, $r19, $r22, r24;
        java.lang.Throwable $r21;
        int $i0, $i1, i2, $i3, $i4;
        java.lang.String $r6, $r7;
        org.waveprotocol.wave.client.editor.selection.html.NativeSelectionUtil$MutationListener $r10, $r20, $r23;
        com.google.gwt.core.client.JavaScriptObject $r2;
        org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C r9;
        com.google.gwt.dom.client.Node r0, $r11, $r12, $r27, $r28, $r29, $r30, $r31, $r32;
        com.google.gwt.dom.client.Document $r5;

        r9 := @this: org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C;

        r0 := @parameter0: com.google.gwt.dom.client.Node;

        i2 := @parameter1: int;

        if r0 == null goto label1;

        $r1 = virtualinvoke r0.<com.google.gwt.dom.client.Node: com.google.gwt.dom.client.Element getParentElement()>();

        if $r1 != null goto label2;

     label1:
        return null;

     label2:
        $z0 = staticinvoke <org.waveprotocol.wave.client.common.util.DomHelper: boolean isTextNode(com.google.gwt.dom.client.Node)>(r0);

        if $z0 == 0 goto label7;

        $r5 = staticinvoke <com.google.gwt.dom.client.Document: com.google.gwt.dom.client.Document get()>();

        $r6 = virtualinvoke r0.<com.google.gwt.dom.client.Node: java.lang.String getNodeValue()>();

        $r7 = virtualinvoke $r6.<java.lang.String: java.lang.String substring(int,int)>(0, i2);

        $r8 = virtualinvoke $r5.<com.google.gwt.dom.client.Document: com.google.gwt.dom.client.Text createTextNode(java.lang.String)>($r7);

     label3:
        $r10 = r9.<org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C: org.waveprotocol.wave.client.editor.selection.html.NativeSelectionUtil$MutationListener mutationListener>;

        interfaceinvoke $r10.<org.waveprotocol.wave.client.editor.selection.html.NativeSelectionUtil$MutationListener: void startTransientMutations()>();

        $r11 = virtualinvoke r0.<com.google.gwt.dom.client.Node: com.google.gwt.dom.client.Node getParentNode()>();

        $r27 = (com.google.gwt.dom.client.Node) $r8;

        virtualinvoke $r11.<com.google.gwt.dom.client.Node: com.google.gwt.dom.client.Node insertBefore(com.google.gwt.dom.client.Node,com.google.gwt.dom.client.Node)>($r27, r0);

        $r28 = (com.google.gwt.dom.client.Node) $r8;

        $r12 = virtualinvoke $r28.<com.google.gwt.dom.client.Node: com.google.gwt.dom.client.Node getParentNode()>();

        $r13 = <org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C: com.google.gwt.dom.client.Element SPAN>;

        $r29 = (com.google.gwt.dom.client.Node) $r13;

        $r30 = (com.google.gwt.dom.client.Node) $r8;

        virtualinvoke $r12.<com.google.gwt.dom.client.Node: com.google.gwt.dom.client.Node insertAfter(com.google.gwt.dom.client.Node,com.google.gwt.dom.client.Node)>($r29, $r30);

        $r25 = new org.waveprotocol.wave.client.common.util.OffsetPosition;

        $r15 = <org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C: com.google.gwt.dom.client.Element SPAN>;

        $i3 = virtualinvoke $r15.<com.google.gwt.dom.client.Element: int getOffsetLeft()>();

        $r16 = <org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C: com.google.gwt.dom.client.Element SPAN>;

        $i4 = virtualinvoke $r16.<com.google.gwt.dom.client.Element: int getOffsetTop()>();

        $r17 = <org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C: com.google.gwt.dom.client.Element SPAN>;

        $r18 = virtualinvoke $r17.<com.google.gwt.dom.client.Element: com.google.gwt.dom.client.Element getOffsetParent()>();

        specialinvoke $r25.<org.waveprotocol.wave.client.common.util.OffsetPosition: void <init>(int,int,com.google.gwt.dom.client.Element)>($i3, $i4, $r18);

     label4:
        $r19 = <org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C: com.google.gwt.dom.client.Element SPAN>;

        virtualinvoke $r19.<com.google.gwt.dom.client.Element: void removeFromParent()>();

        $r31 = (com.google.gwt.dom.client.Node) $r8;

        virtualinvoke $r31.<com.google.gwt.dom.client.Node: void removeFromParent()>();

        $r20 = r9.<org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C: org.waveprotocol.wave.client.editor.selection.html.NativeSelectionUtil$MutationListener mutationListener>;

        interfaceinvoke $r20.<org.waveprotocol.wave.client.editor.selection.html.NativeSelectionUtil$MutationListener: void endTransientMutations()>();

        return $r25;

     label5:
        $r21 := @caughtexception;

     label6:
        $r22 = <org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C: com.google.gwt.dom.client.Element SPAN>;

        virtualinvoke $r22.<com.google.gwt.dom.client.Element: void removeFromParent()>();

        $r32 = (com.google.gwt.dom.client.Node) $r8;

        virtualinvoke $r32.<com.google.gwt.dom.client.Node: void removeFromParent()>();

        $r23 = r9.<org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C: org.waveprotocol.wave.client.editor.selection.html.NativeSelectionUtil$MutationListener mutationListener>;

        interfaceinvoke $r23.<org.waveprotocol.wave.client.editor.selection.html.NativeSelectionUtil$MutationListener: void endTransientMutations()>();

        throw $r21;

     label7:
        $r2 = virtualinvoke r0.<com.google.gwt.dom.client.Node: com.google.gwt.core.client.JavaScriptObject cast()>();

        r24 = (com.google.gwt.dom.client.Element) $r2;

        $r26 = new org.waveprotocol.wave.client.common.util.OffsetPosition;

        $i0 = virtualinvoke r24.<com.google.gwt.dom.client.Element: int getOffsetLeft()>();

        $i1 = virtualinvoke r24.<com.google.gwt.dom.client.Element: int getOffsetTop()>();

        $r4 = virtualinvoke r24.<com.google.gwt.dom.client.Element: com.google.gwt.dom.client.Element getOffsetParent()>();

        specialinvoke $r26.<org.waveprotocol.wave.client.common.util.OffsetPosition: void <init>(int,int,com.google.gwt.dom.client.Element)>($i0, $i1, $r4);

        return $r26;

        catch java.lang.Throwable from label3 to label4 with label5;
        catch java.lang.Throwable from label5 to label6 with label5;
    }

    public org.waveprotocol.wave.model.util.IntRange getFocusBounds()
    {
        org.waveprotocol.wave.model.util.IntRange $r3;
        int $i0;
        org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative $r0;
        org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C r1;
        com.google.gwt.dom.client.Node $r2;

        r1 := @this: org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C;

        $r0 = staticinvoke <org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative: org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative getSelectionGuarded()>();

        if $r0 != null goto label1;

        $r3 = null;

        goto label2;

     label1:
        $r2 = virtualinvoke $r0.<org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative: com.google.gwt.dom.client.Node focusNode()>();

        $i0 = virtualinvoke $r0.<org.waveprotocol.wave.client.editor.selection.html.SelectionW3CNative: int focusOffset()>();

        $r3 = specialinvoke r1.<org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C: org.waveprotocol.wave.model.util.IntRange getBounds(com.google.gwt.dom.client.Node,int)>($r2, $i0);

     label2:
        return $r3;
    }

    private org.waveprotocol.wave.model.util.IntRange getBounds(com.google.gwt.dom.client.Node, int)
    {
        com.google.gwt.core.client.JavaScriptObject $r2;
        org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C r6;
        org.waveprotocol.wave.model.util.IntRange $r3, $r5;
        com.google.gwt.dom.client.Element $r1, $r4, r7;
        int $i0, $i1, $i2, $i3, i4;
        com.google.gwt.dom.client.Node r0;
        boolean $z0;

        r6 := @this: org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C;

        r0 := @parameter0: com.google.gwt.dom.client.Node;

        i4 := @parameter1: int;

        if r0 == null goto label1;

        $r1 = virtualinvoke r0.<com.google.gwt.dom.client.Node: com.google.gwt.dom.client.Element getParentElement()>();

        if $r1 != null goto label2;

     label1:
        return null;

     label2:
        $z0 = staticinvoke <org.waveprotocol.wave.client.common.util.DomHelper: boolean isTextNode(com.google.gwt.dom.client.Node)>(r0);

        if $z0 == 0 goto label3;

        $r4 = virtualinvoke r0.<com.google.gwt.dom.client.Node: com.google.gwt.dom.client.Element getParentElement()>();

        $r5 = new org.waveprotocol.wave.model.util.IntRange;

        $i2 = virtualinvoke $r4.<com.google.gwt.dom.client.Element: int getAbsoluteTop()>();

        $i3 = virtualinvoke $r4.<com.google.gwt.dom.client.Element: int getAbsoluteBottom()>();

        specialinvoke $r5.<org.waveprotocol.wave.model.util.IntRange: void <init>(int,int)>($i2, $i3);

        return $r5;

     label3:
        $r2 = virtualinvoke r0.<com.google.gwt.dom.client.Node: com.google.gwt.core.client.JavaScriptObject cast()>();

        r7 = (com.google.gwt.dom.client.Element) $r2;

        $r3 = new org.waveprotocol.wave.model.util.IntRange;

        $i0 = virtualinvoke r7.<com.google.gwt.dom.client.Element: int getAbsoluteTop()>();

        $i1 = virtualinvoke r7.<com.google.gwt.dom.client.Element: int getAbsoluteBottom()>();

        specialinvoke $r3.<org.waveprotocol.wave.model.util.IntRange: void <init>(int,int)>($i0, $i1);

        return $r3;
    }

    static void <clinit>()
    {
        com.google.gwt.dom.client.Element $r2;
        com.google.gwt.dom.client.SpanElement $r1;
        com.google.gwt.dom.client.Document $r0;

        $r0 = staticinvoke <com.google.gwt.dom.client.Document: com.google.gwt.dom.client.Document get()>();

        $r1 = virtualinvoke $r0.<com.google.gwt.dom.client.Document: com.google.gwt.dom.client.SpanElement createSpanElement()>();

        $r2 = (com.google.gwt.dom.client.Element) $r1;

        <org.waveprotocol.wave.client.editor.selection.html.SelectionCoordinatesHelperW3C: com.google.gwt.dom.client.Element SPAN> = $r2;

        return;
    }
}
